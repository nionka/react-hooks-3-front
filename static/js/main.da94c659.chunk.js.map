{"version":3,"sources":["components/AuthForm/AuthForm.jsx","components/LoginForm/LoginForm.jsx","components/NewsItem/NewsItem.jsx","components/News/News.jsx","hooks/useStorage.js","components/Landing/Landing.jsx","App.js","reportWebVitals.js","index.js"],"names":["AuthForm","onAuth","useState","login","password","form","setForm","handleChange","e","target","name","value","prev","className","onSubmit","preventDefault","trim","onChange","placeholder","type","LoginForm","props","src","avatar","alt","onClick","onLogout","NewsItem","item","title","image","content","News","news","map","id","useStorage","storage","key","jsonify","JSON","parse","getItem","setValue","useEffect","setItem","stringify","removeItem","Landing","setNews","error","setError","localStorage","token","setToken","profile","setProfile","prof","url","state","a","fetch","headers","Authorization","response","ok","Error","json","message","process","method","body","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.da94c659.chunk.js","sourcesContent":["import React, {useState} from 'react';\nimport PropTypes from 'prop-types';\n\nfunction AuthForm({onAuth}) {\n    const [form, setForm] = useState({ login: '', password: '' });\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n\n        if (form.login.trim() === '' || form.password.trim() === '') return null\n\n        onAuth(form);\n        setForm({ login: '', password: '' });\n    }\n\n    const handleChange = (e) => {\n        const {name, value} = e.target;\n        setForm(prev => ({...prev, [name]: value}));\n    }\n\n    return (\n        <form className=\"form\" onSubmit={handleSubmit}>\n            <input name=\"login\" value={form.login} onChange={handleChange} placeholder=\"Username\"></input>\n            <input name=\"password\" value={form.password} onChange={handleChange} placeholder=\"Password\"></input>\n            <button type=\"submit\">Login</button>\n        </form>\n    )\n}\n\nAuthForm.propTypes = {\n    onAuth: PropTypes.func\n}\n\nexport default AuthForm","import PropTypes from 'prop-types';\n\nfunction LoginForm(props) {\n    return (\n        <div className=\"user\">\n            <div className=\"user__name\">Hello, {props.name}</div>\n            <div className=\"user__img\">\n                <img src={props.avatar} alt={props.name}></img>\n            </div>\n            <button type=\"button\" onClick={props.onLogout}>Logout</button>\n        </div>\n    )\n}\n\nLoginForm.propTypes = {\n    name: PropTypes.string,\n    avatar: PropTypes.string,\n    onLogout: PropTypes.func\n}\n\nexport default LoginForm","import PropTypes from 'prop-types';\n\nfunction NewsItem({ item }) {\n    return (\n        <li className=\"item\">\n            <img alt={item.title} src={item.image}></img>\n            <div>\n                <h2>{item.title}</h2>\n                <div>{item.content}</div>\n            </div>\n            \n        </li>\n    )\n}\n\nNewsItem.propTypes = {\n    item: PropTypes.object\n}\n\nexport default NewsItem","import NewsItem from '../NewsItem/NewsItem';\nimport PropTypes from 'prop-types';\n\nfunction News({ news }) {\n    return (\n        <ul className=\"news\">\n            {news.map(item => <NewsItem key={item.id} item={item} />)}\n        </ul>\n    )\n}\n\nNews.propTypes = {\n    news: PropTypes.array\n}\n\nexport default News","import { useState, useEffect } from 'react';\n\nfunction useStorage(storage, key, jsonify = false) {\n    const [value, setValue] = useState(\n        jsonify ? JSON.parse(storage.getItem(key)) : storage.getItem(key)\n    );\n\n    useEffect(() => {\n        if (value === null) {\n            storage.removeItem(key);\n            return;\n        }\n        storage.setItem(key, jsonify ? JSON.stringify(value) : value);\n    }, [value, storage, key, jsonify]);\n\n    return [value, setValue];\n}\n\nexport default useStorage","/* eslint-disable react-hooks/exhaustive-deps */\nimport React, {useState, useEffect} from 'react';\nimport AuthForm from '../AuthForm/AuthForm';\nimport LoginForm from '../LoginForm/LoginForm';\nimport News from '../News/News';\nimport useStorage from '../../hooks/useStorage';\n\nfunction Landing() {\n    const [news, setNews] = useState();\n    const [error, setError] = useState(null);\n    const [token, setToken] = useStorage(localStorage, 'token')\n    const [profile, setProfile] = useStorage(localStorage, 'profile', true);\n\n    useEffect(() => {\n        if (token) {\n            const prof = async(url, state) => {\n                try {\n                    const response = await fetch(url, {headers: {Authorization: `Bearer ${token}`}})\n                    \n                    if (!response.ok) {\n                        throw new Error('Что-то пошло не так!!!');\n                    }\n                    const json = await response.json()\n\n                    state(json)\n                    setError(null)\n\n                } catch(err) {\n\n                    if (err.name === 'TypeError') {\n                        setError('Сервер не отвечает')\n                    } else {\n                        setError(err.message)\n                    }\n                    setProfile(null)\n                    setToken(null)\n                }\n            }\n            prof(`${process.env.REACT_APP_URL}/private/me`, setProfile);\n            prof(`${process.env.REACT_APP_URL}/private/news`, setNews);\n        }\n    }, [token])\n\n    // useEffect(() => {\n    //     if (token) {\n    //         const prof = async() => {\n    //             try {\n    //                 const response = await fetch(`${process.env.REACT_APP_URL}/private/news`, {headers: {Authorization: `Bearer ${token}`}})\n    //                 const json = await response.json()\n\n    //                 if (!response.ok) {\n    //                     throw new Error('Что-то пошло не так')\n    //                 }\n\n    //                 setNews(json)\n    //                 setError(null)\n\n    //             } catch(err) {\n\n    //                 if (err.name === 'TypeError') {\n    //                     setError('Сервер не отвечает')\n    //                 } else {\n    //                     setError(err.message)\n    //                 }\n    //                 setProfile(null)\n    //                 setToken(null)\n    //             }\n    //         }\n    //         prof()\n    //     }\n    // }, [token])\n\n    const onAuth = async (form) => {\n    \n        try {\n            const response = await fetch(`${process.env.REACT_APP_URL}/auth`, {\n                method: 'POST',\n                headers: {'Content-Type': 'application/json'},\n                body: JSON.stringify(form)\n            });\n            \n            if (!response.ok) {\n                throw new Error('Пользователь не найден!')\n            }\n\n            const json = await response.json()\n            setToken(json.token)\n            setError(null)\n            \n        } catch(err) {\n            \n            if (err.name === 'TypeError') {\n                setError('Сервер не отвечает')\n            } else {\n                setError(err.message)\n            }\n        }   \n    }\n\n    const onLogout = () => {\n        setProfile(null)\n        setToken(null)\n        setNews()\n    }\n\n    return (\n        <div className=\"landing\">\n            {error && <div className=\"error\">{error}</div>}\n            <header className=\"header\">\n                <div className=\"logo\">Neto Social</div>\n                {profile ? <LoginForm {...profile} onLogout={onLogout} /> : <AuthForm onAuth={onAuth}/>}   \n            </header>\n            <main className=\"main\">\n                {news ? <News news={news} /> : <><h1>Neto Social</h1><p>Facebook and VK killer.</p></>}   \n            </main>   \n        </div>\n    )\n}\n\nexport default Landing","import './App.css';\nimport Landing from './components/Landing/Landing';\n\nfunction App() {\n  return (\n    <div className=\"container\">\n      <Landing />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}